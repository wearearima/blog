<!DOCTYPE html>
<html lang="eu" itemscope itemtype="http://schema.org/Blog">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Java Docker edukiontzietan exekutatzea bideragarria al da?</title>
  <meta name="description" content="Gure inguruan enpresa asko daude Java erabili izan dutenak beraien aplikazioak garatzeko. Horretarako Spring, Tomcat, Weblogic eta JPA bezelako tresnak erabi...">
  
  <meta name="keywords" content="docker,containers,java,contenedores">
  

  <!-- Twitter cards -->
  <meta name="twitter:site"    content="@wearearima">
  <meta name="twitter:creator" content="@telle">
  <meta name="twitter:title"   content="Java Docker edukiontzietan exekutatzea bideragarria al da?">

  
  <meta name="twitter:description" content="">
  

  
  <meta name="twitter:card"  content="summary_large_image">
  <meta name="twitter:image" content="https://blog.arima.eu/assets/images/2020-02-11-java-en-contenedores-docker/fondo-cafe-min.jpg">
  
  <!-- end of Twitter cards -->

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://blog.arima.eu/en/2020/02/11/java-en-contenedores-docker.html">
  <link rel="alternate" type="application/rss+xml" title="ARIMA" href="/en/feed.xml">

  <!-- SEO Recipes (http://polyglot.untra.io/seo/) -->
  <meta http-equiv="Content-Language" content="en">
  <link rel="alternate"
      hreflang="es"
      href="https://blog.arima.eu/en/2020/02/11/java-en-contenedores-docker.html" />
  
  
  <link rel="alternate"
      hreflang="es"
      href="https://blog.arima.eu/es/2020/02/11/java-en-contenedores-docker.html" />
  
  
  <link rel="alternate"
      hreflang="en"
      href="https://blog.arima.eu/en/2020/02/11/java-en-contenedores-docker.html" />
  
  
  <link rel="alternate"
      hreflang="eu"
      href="https://blog.arima.eu/en/eus/2020/02/11/java-en-contenedores-docker.html" />
  

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120217722-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120217722-1');
</script>
  
</head>
  

  <body>
    <nav class="toolbar">
    <div class="wrapper">    
        <a href="/en/">
            <div class="toolbar__logo">
                <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" width="100%" height="100%" viewBox="0 0 33 6">
    <path id="path24" d="m30.346988508615652,-0.000015174522529526127 l-0.6439224998849951,0 l-2.7763635316117727,6.135695064030662 l0.7050150612484405,0 l2.3859233880279893,-5.335002838884215 l2.3660424189063254,5.335002838884215 l0.739668694925785,0 L30.346988508615652,-0.000015174522529526127 zm-8.274141805179609,3.3681675186951847 l-2.2194202716340565,-3.324608867598761 l-0.6962481061149294,0 l0,6.092136412934239 l0.6700853029999622,0 l0,-4.926062349034439 l2.2194202716340565,3.2553706313868567 l0.034929758248478535,0 l2.2192131782057056,-3.2639304930920168 l0,4.934622210739599 l0.6873430886958508,0 l0,-6.092136412934239 l-0.6961100438293623,0 l-2.2192131782057056,3.324608867598761 zm-9.143036799396208,-1.5057072863948877 c0,-1.0964906719739773 -0.8613705996531913,-1.8189015812038738 -2.201748299081466,-1.8189015812038738 l-2.619662837493104,0 l0,6.092136412934239 l0.6876192132669849,0 l0,-5.456842805897188 l1.8799251114245357,0 c0.9833486289517317,0 1.5576187057681203,0.4525681720889824 1.5576187057681203,1.2097017461390067 c0,0.7919252700129356 -0.7831583148794242,1.2620273523689407 -1.6968545207625496,1.2620273523689407 l0,0.6178287279128115 l1.7665759749739396,2.3672849794764295 l0.8442508762428699,0 l-1.8711581562910244,-2.4891249464894027 c0.9571858258367647,-0.17416557324290774 1.6534339319516944,-0.7659695603263191 1.6534339319516944,-1.7841098852409623 m2.7743616284710493,4.273234831730365 l0.6872050264102838,0 l0,-6.0920673817914555 l-0.6872050264102838,0 l0,6.0920673817914555 zM2.7761571742923965,-0.000015174522529526127 l-2.7761564381834223,6.135695064030662 l0.7048769989628736,0 l2.386061450313556,-5.335002838884215 l2.3658353254779745,5.335002838884215 l0.739668694925785,0 l-2.7761564381834223,-6.135695064030662 l-0.6441295933133457,0 z" stroke-width="0"/>
</svg>

            </div>
        </a>
        <!-- Language selector -->
        <div class="language-selector">
            
              
                <a class="unselected" href="/es/2020/02/11/java-en-contenedores-docker.html">ES</a>
              
              
                &nbsp;|&nbsp;
              
            
              
                <b class="selected">EN</b>
              
              
                &nbsp;|&nbsp;
              
            
              
                <a class="unselected" href="/eu/2020/02/11/java-en-contenedores-docker.html">EU</a>
              
              
            
         </div>
    </div>
</nav>
<div id="publisher_id" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Arima 100% Software Design" />
    <meta itemprop="url" content="https://arima.eu" />
    <div itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://arima.eu/img/logo.png" />
    </div>
</div>
    <main aria-label="Content">        
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting" itemref="publisher_id">
          <link itemprop="mainEntityOfPage" href="/en/2020/02/11/java-en-contenedores-docker.html" />

          <header class="post-header">
            <div class="post-img" itemprop="image" itemscope itemtype="http://schema.org/ImageObject" style="background-image: url('https://blog.arima.eu/assets/images/2020-02-11-java-en-contenedores-docker/fondo-cafe-min.jpg');">
              <meta itemprop="url" content="https://blog.arima.eu/assets/images/2020-02-11-java-en-contenedores-docker/fondo-cafe-min.jpg" />
            </div>
            <div class="wrapper">
              <div class="post-info__container">
                <div class="post-info">
                  <h1 class="post-title" itemprop="name headline">Java Docker edukiontzietan exekutatzea bideragarria al da?</h1>
                    <div class="post-meta" itemscope itemtype="https://schema.org/Person" itemprop="author">
                      
                      <div class="author-photo">
                        <img itemprop="image" src="/assets/images/authors/telle.png" alt="">
                      </div>
                      <div>
                        <span class="post-author" itemprop="name">Iñigo Telleria</span>
                      </div>
                      <div>
                        <span class="post-date">02-11-2020</span>
                      </div>
                    </div>
                    <meta  itemprop="datePublished dateModified" content="02-11-2020" />
                </div>
              </div>
            </div>
          </header>
          <div class="wrapper">
            <div class="post-content" itemprop="articleBody">
              <p>Gure inguruan enpresa asko daude Java erabili izan dutenak beraien aplikazioak garatzeko. Horretarako Spring, Tomcat, Weblogic eta JPA bezelako tresnak erabili ohi dira. Azpiegitura hau nahiko egonkorra izan da beti eta aldaketa gutxi jasan ditu.</p>

<p>Azkenaldian, Kubernetes-en oinarrituta dauden “cloud” infraestuktura berriak plazaratu dira (<a href="https://azure.microsoft.com/en-us/free/kubernetes-service/" target="_blank">Azure</a>, <a href="https://www.redhat.com/es/technologies/cloud-computing/openshift" target="_blank">Openshift</a>, <a href="https://aws.amazon.com/es/eks/" target="_blank">Amazon EKS</a>, etab.). Enpresa asko Kubernetes ebaluatzen hasten direnean zalantza ugari izaten dituzte, adibidez, orain arte erabilitako teknologiak “cloud”-era joateko egokiak al dira?</p>

<p>Beti gertatzen den bezala, zalantzak argitzeko egiten dugun lehenengo gauza Google-i galdetzea da eta emaitzak aztertuz gero, bildurra ematen duten artikuluak aurkitu ditzakegu. Adibidez, <a href="https://jaxenter.com/nobody-puts-java-container-139373.html" target="_blank">Nobody puts Java in a container</a> edo <a href="https://vimeo.com/181900266" target="_blank">Nobody puts Java in the container</a>.</p>

<p><img src="/assets/images/2020-02-11-java-en-contenedores-docker/no-body-puts-java-in-a-container.png" alt="Nobody puts java in containers" /></p>

<p>Hau ikusita, hurrengo galdera egiten diogu gure buruari: Java docker edukiontzitan exekutatzea bideragarria da?</p>

<h2 id="java-ergonomics">Java Ergonomics</h2>

<p>Java plataforma, 1995 urtean sortu zen eta hortik gutxira, web zerbitzariak eta aplikazioen zerbitzariak zabaldu ziren web aplikazioak Java lengoaian garatu ahal izateko. Garai horretan, oraindik ez zen <a href="https://www.docker.com/resources/what-container" target="_blank">edukiontzien</a> kontzeptua existitzen ezta <a href="https://www.cncf.io/" target="_blank">“Cloud Native”</a> mugimendua ere. Normalean Java web aplikazioak (war-ak edo ear-ak), zerbitzari batean exekutatzen ziren beste hainbat aplikazioekin batera.</p>

<p align="center">
    <img src="/assets/images/2020-02-11-java-en-contenedores-docker/servidor-java-ee.png" />
</p>

<p>Java mota horretako azpiegituratan exekutatzeko diseinatua izan zen, hau da, JVM bakarra duen zerbitzari bat. Hori kontutan hartuta, JVM-ak <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/ergonomics.html" target="_blank">Java Ergonomics</a> prozesua exekutatzen du. Java Ergonomics-aren lana, JVM-aren konfigurazio parametroak kalkulatzea da eta horretarako erabilgarri dauden hardwarearen errekurtsoak aintzat hartzen ditu. Adibidez, Java Ergonomics-ak, JVMaren heap-aren tamaina maximoa ezartzeko zerbitzariak guztira duen RAMaren laurden bat erabiltzen du. Hau da, zerbitzari batek 64GB RAM baditu, lehenetsitako heap-aren tamaina maximoaren balioa 16GBtakoa izango da.</p>

<p>JVM bakoitzeko zerbitzari bat erabiltzen badugu, aurreko planteamenduarekin ez dago inongo arazorik, baino, zer gertatzen da Java Ergonomics Docker edukiontzi batean exekutatzen denean?</p>

<h2 id="lehenengo-esperientziak-java-eta-docker-ekin">Lehenengo esperientziak Java eta Docker-ekin</h2>

<p>Java aplikazio bat edukiontzi batean exekutatzen dugunean, Java Ergonomics prozesuak JVMaren parametroak edukiontziaren baliabideen arabera kalkulatzea interesatzen zaigu. Adibidez, edukiontzi bat 4GBekin exekutatzen badugu, Java Ergonomics-ak 1GBeko heap maximoa ezartzea esperoko genuke.</p>

<p>Tamalez, Java aplikazioak edukiontzitan exekutatzen hasi ginenean, gauzak horrela ez zirela ikusi genuen. Java Ergonomics-ak, heap maximoaren kalkulua zerbitzariaren baliabideen arabera egiten zuen, ez edukiontziaren baliabideen arabera. Hortaz, zerbitzariak 64GB RAM bazituen, heap-aren tamaina maximoa 16GBtan ezartzen zen eta ez guk espero genuen 1GBean. Hori dela eta, aplikazio bat eskalatzean (5 edukiontzitara adibidez), zerbitzariaren memoria agortu egiten zen edukiontzi guztien heap-aren baturak zerbitzariaren memoria gainditzen zuelako (16GB * 5 &gt; 64GB).</p>

<p>Hau konpontzeko, Java Ergonomics-en flag batzuk erabili ohi genituen (-Xmx, -Xms, etab.). Hala ere, enpresa askok ez zuten guzti honen berri eta konturatu zirenerako, produkzioan zeuzkaten aplikazioetan memoria arazoak (OOMKilled erroreak) eta erorketak jasaten ari ziren. Arazo hauen eraginez, artikulu asko idatzi ziren Java aplikazioak edukiontzitan exekutatzeko zeuden arriskuak jakinarazteko helburuarekin.</p>

<h2 id="java-container-aware">Java Container Aware</h2>

<p>Oracle-k arazo hauei <a href="https://blogs.oracle.com/java-platform-group/java-se-support-for-docker-cpu-and-memory-limits" target="_blank">erantzuna eman zien</a> eta Java 8u131 eta Java 9 bertsioetan aplikazioak edukiontziekin bateragarriak egin zituzten nahiz eta modu espermientalean eta zenbait gabeziekin izan. Java 8u191 eta Java 10 bertsioetan arazo guzti hauek konpondu egin ziren</p>

<p>Bertsio berri hauetatik aurrera, Java Ergonomics prozesuak JVMaren konfigurazioa kalkulatzeko, edukiontziaren baliabideak automatikoki aintzat hartzen ditu. Java bertsio ezberdinen arteko ezberdintasunak probatu nahi badituzue, Git biltegi <a href="https://github.com/wearearima/docker-java-cpu-memory-limit" target="_blank">honetan</a> dagoen kodearekin frogak egin ditzakezue.</p>

<p>Aldaketa hauekin batera, JVMan edukiontzitara zuzendutako konfigurazio aukera berriak gehitu ziren: <code class="highlighter-rouge">InitialRAMPercentage</code>, <code class="highlighter-rouge">MaxRAMPercentage</code> y <code class="highlighter-rouge">MinRAMPercentage</code>.</p>

<p>Aldaketa guzti hauei esker, <strong>Java “Container Aware” dela esaten da Java 8u191 eta Java 10 bertsioetatik aurrera</strong>.</p>

<h2 id="ondorioak">Ondorioak</h2>

<p>Java 1995. urtean sortu zenean, inorrek ezin zuen aurreikusi Docker eta Kubernetes bezalako teknologiak sortuko zirela. Hori kontutan izanda, Java aplikazioak edukiontzitan exekutatzea bideragarria al da?</p>

<p>Erantzuna baiezkoa da, Java komunitatea teknologia berrietara moldatzen ari da. Lehenengo oztopoa Java Ergonomics-ekin erlazionatuta zegoen eta dagoeneko konponduta dago. Hala eta guztiz ere, badaude beste alor batzuk hobetzeko, adibidez, JVMak duen tamaina. Horren inguruan, gertutik jarraitu beharreko tresna eta framework ugari agertzen hasi dira (<a href="https://www.graalvm.org/docs/reference-manual/native-image/" target="_blank">Graal Native Image</a>, <a href="https://micronaut.io/" target="_blank">Micronaut</a>, <a href="https://quarkus.io/" target="_blank">Quarkus</a>, etab.).</p>

            </div>

            
          </div>
        </article>
      </div>
    </main>

    <footer>
    <div class="wrapper">
        <div class="footer__container">
            <div class="footer__sello">
                <img src="/assets/images/arima_sello_white.png" alt="" />
            </div>
            <div class="footer__content">
                <div class="footer__data">
                    <dl>
                        <dt>web</dt>
                        <dd><a itemprop="sameAs" href="https://www.arima.eu/en/">arima.eu</a></dd>
                    </dl>
                    <dl>
                        <dt>social</dt>
                        <dd>
                            <a itemprop="sameAs" href="https://github.com/wearearima" class="social"><span class="icon-github"></span></a>
                            <a itemprop="sameAs" href="https://twitter.com/wearearima" class="social"><span class="icon-twitter"></span></a>
                            <a itemprop="sameAs" href="https://www.linkedin.com/company/arima-software-design/" class="social"><span class="icon-linkedin"></span></a>
                            <a itemprop="sameAs" href="/en/feed.xml" class="social"><span class="icon-feed"></span></a>
                        </dd>
                    </dl>
                    <dl>
                        <dt>Privacy</dt>
                        <dd class="politica-cookies">
                            <a href="/en/cookies.html">Cookies Policy</a>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</footer>
    <div class="cookies-message" id="cookies-message">
    <h4>This website uses cookies</h4>
    <p>This website uses cookies to improve user experience. By continuing to browse this website, you agree to the use of cookies as stated in our Cookies Policy.</p>
    <div class="buttons">
        <a class="button" href="/en/cookies.html">Read Cookies Policy</a>
        <button class="button" id="accept-cookies">Accept</button>
    </div>
</div>
<script>
    (function() {
        if(localStorage) {
            var cookiesAccepted = localStorage.getItem("cookies-accepted");
            if(cookiesAccepted) {
                hideCookiesMessage();
                
            } else {
                document.getElementById('accept-cookies').addEventListener("click", function() {
                    hideCookiesMessage();
                    localStorage.setItem("cookies-accepted", true);
                })
            }
        }
        function hideCookiesMessage() {
            document.getElementById('cookies-message').style.display = "none";
        }
    })();
</script>

  </body>

</html>