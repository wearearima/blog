<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Blog">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Lessons learned about Contract Testing</title>
  <meta name="description" content="Over the course of several posts, we have seen how, as a result of the evolution of application architectures, new needs arise in the field of testing. We ha...">
  
  <meta name="keywords" content="testing,calidad,softwarequality,QA,contracttesting,consumer-drivencontracttesting,consumerdrivencontracttesting,provider-drivencontracttesting,providerdrivencontracttesting">
  

  <!-- Twitter cards -->
  <meta name="twitter:site"    content="@wearearima">
  <meta name="twitter:creator" content="@jessica">
  <meta name="twitter:title"   content="Lessons learned about Contract Testing">

  
  <meta name="twitter:description" content="">
  

  
  <meta name="twitter:card"  content="summary_large_image">
  <meta name="twitter:image" content="https://blog.arima.eu/assets/images/2021-02-08-contract-testing/header.jpg">
  
  <!-- end of Twitter cards -->

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://blog.arima.eu/en/2021/02/08/contract-testing-lessons-learned.html">
  <link rel="alternate" type="application/rss+xml" title="ARIMA" href="/en/feed.xml">

  <!-- SEO Recipes (http://polyglot.untra.io/seo/) -->
  <meta http-equiv="Content-Language" content="en">
  <link rel="alternate"
      hreflang="es"
      href="https://blog.arima.eu/en/2021/02/08/contract-testing-lessons-learned.html" />
  
  
  <link rel="alternate"
      hreflang="es"
      href="https://blog.arima.eu/es/2021/02/08/contract-testing-lessons-learned.html" />
  
  
  <link rel="alternate"
      hreflang="en"
      href="https://blog.arima.eu/en/2021/02/08/contract-testing-lessons-learned.html" />
  
  
  <link rel="alternate"
      hreflang="eu"
      href="https://blog.arima.eu/en/eus/2021/02/08/contract-testing-lessons-learned.html" />
  

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120217722-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120217722-1');
</script>
  
</head>
  

  <body>
    <nav class="toolbar">
    <div class="wrapper">    
        <a href="/en/">
            <div class="toolbar__logo">
                <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" width="100%" height="100%" viewBox="0 0 33 6">
    <path id="path24" d="m30.346988508615652,-0.000015174522529526127 l-0.6439224998849951,0 l-2.7763635316117727,6.135695064030662 l0.7050150612484405,0 l2.3859233880279893,-5.335002838884215 l2.3660424189063254,5.335002838884215 l0.739668694925785,0 L30.346988508615652,-0.000015174522529526127 zm-8.274141805179609,3.3681675186951847 l-2.2194202716340565,-3.324608867598761 l-0.6962481061149294,0 l0,6.092136412934239 l0.6700853029999622,0 l0,-4.926062349034439 l2.2194202716340565,3.2553706313868567 l0.034929758248478535,0 l2.2192131782057056,-3.2639304930920168 l0,4.934622210739599 l0.6873430886958508,0 l0,-6.092136412934239 l-0.6961100438293623,0 l-2.2192131782057056,3.324608867598761 zm-9.143036799396208,-1.5057072863948877 c0,-1.0964906719739773 -0.8613705996531913,-1.8189015812038738 -2.201748299081466,-1.8189015812038738 l-2.619662837493104,0 l0,6.092136412934239 l0.6876192132669849,0 l0,-5.456842805897188 l1.8799251114245357,0 c0.9833486289517317,0 1.5576187057681203,0.4525681720889824 1.5576187057681203,1.2097017461390067 c0,0.7919252700129356 -0.7831583148794242,1.2620273523689407 -1.6968545207625496,1.2620273523689407 l0,0.6178287279128115 l1.7665759749739396,2.3672849794764295 l0.8442508762428699,0 l-1.8711581562910244,-2.4891249464894027 c0.9571858258367647,-0.17416557324290774 1.6534339319516944,-0.7659695603263191 1.6534339319516944,-1.7841098852409623 m2.7743616284710493,4.273234831730365 l0.6872050264102838,0 l0,-6.0920673817914555 l-0.6872050264102838,0 l0,6.0920673817914555 zM2.7761571742923965,-0.000015174522529526127 l-2.7761564381834223,6.135695064030662 l0.7048769989628736,0 l2.386061450313556,-5.335002838884215 l2.3658353254779745,5.335002838884215 l0.739668694925785,0 l-2.7761564381834223,-6.135695064030662 l-0.6441295933133457,0 z" stroke-width="0"/>
</svg>

            </div>
        </a>
        <!-- Language selector -->
        <div class="language-selector">
            
              
                <a class="unselected" href="/es/2021/02/08/contract-testing-lessons-learned.html">ES</a>
              
              
                &nbsp;|&nbsp;
              
            
              
                <b class="selected">EN</b>
              
              
                &nbsp;|&nbsp;
              
            
              
                <a class="unselected" href="/eu/2021/02/08/contract-testing-lessons-learned.html">EU</a>
              
              
            
         </div>
    </div>
</nav>
<div id="publisher_id" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Arima 100% Software Design" />
    <meta itemprop="url" content="https://arima.eu" />
    <div itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://arima.eu/img/logo.png" />
    </div>
</div>
    <main aria-label="Content">        
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting" itemref="publisher_id">
          <link itemprop="mainEntityOfPage" href="/en/2021/02/08/contract-testing-lessons-learned.html" />

          <header class="post-header">
            <div class="post-img" itemprop="image" itemscope itemtype="http://schema.org/ImageObject" style="background-image: url('https://blog.arima.eu/assets/images/2021-02-08-contract-testing/header.jpg');">
              <meta itemprop="url" content="https://blog.arima.eu/assets/images/2021-02-08-contract-testing/header.jpg" />
            </div>
            <div class="wrapper">
              <div class="post-info__container">
                <div class="post-info">
                  <h1 class="post-title" itemprop="name headline">Lessons learned about Contract Testing</h1>
                    <div class="post-meta" itemscope itemtype="https://schema.org/Person" itemprop="author">
                      
                      <div class="author-photo">
                        <img itemprop="image" src="/assets/images/authors/jessica.png" alt="">
                      </div>
                      <div>
                        <span class="post-author" itemprop="name">Jessica Aguado</span>
                      </div>
                      <div>
                        <span class="post-date">02-08-2021</span>
                      </div>
                    </div>
                    <meta  itemprop="datePublished dateModified" content="02-08-2021" />
                </div>
              </div>
            </div>
          </header>
          <div class="wrapper">
            <div class="post-content" itemprop="articleBody">
              <p>Over the course of several posts, we have seen how, as a result of the evolution of application architectures, new needs arise in the field of testing. We have focused on a specific one: as important as testing the functionalities in <em>consumer</em> and <em>producer</em> independently is, so also is ensuring that <a href="https://blog.arima.eu/en/2020/09/03/contract-testing.html" target="_blank">the interaction between them is correct</a>. We have seen that we have <strong>Contract Testing</strong> within our reach, with <a href="https://blog.arima.eu/en/2020/10/09/contract-testing-approach.html" target="_blank">different approaches and tools</a> that allow us to address this specific need. Also using the <strong>producer driven</strong> approach and <a href="https://spring.io/projects/spring-cloud-contract" target="_blank"><strong>Spring Cloud Contract</strong></a> we have <a href="https://blog.arima.eu/en/2020/10/29/playing-with-spring-cloud-contract.html" target="_blank">put into practice</a> everything learned.</p>

<p>I was thinking of ending this series of posts with a compilation of lessons learned ‚Ä¶ Something like a mini-post summarizing everything we‚Äôve seen so far in four or five headlines.
While reflecting on this, I remembered that in my learning process there was a lesson that stood out from the rest. There may be those for whom it‚Äôs obvious, but there‚Äôs sure to be someone out there who finds themself in the same alley as I did at the time ‚Ä¶ So, for that ‚Äúsomeone‚Äù üòâ here‚Äôs my two cents:</p>
<blockquote>
  <p>Doing Contract Testing <strong>does not</strong> exempt you from doing Unit Testing or Integration Testing.</p>
</blockquote>

<p>Okay, I know that this is what it says on all the sites, that I‚Äôm not saying anything new ‚Ä¶ but hey, I was tempted to do it ‚Ä¶ maybe you who are reading this too ‚Ä¶ and you know my mantra: <em>understand by doing</em> üòä.
We are going to start from the example in which we used Spring Cloud Contract. We already know what it‚Äôs about and we can check the example.</p>

<p>Looking at the <em>consumer</em> tests, we might think ‚Ä¶</p>

<p>üí° Hey! It would be great to have all the possible cases that I need for my logic represented in the stub so it would save me the unit test where I have all those situations mocked up</p>

<p>What a good idea!</p>

<p>ü§î Sure, but the <em>producer</em> doesn‚Äôt have to know my different scenarios and is the one who created the contract.</p>

<p>Hmm, it‚Äôs true ‚Ä¶ how could I have come up with that? What was I thinking ‚Ä¶..?</p>

<p>üí° Wait! What I need is <em>consumer driven contracts</em>!</p>

<p>I can create the contracts from the <em>consumer</em> with the information I need and make the contracts available in the <em>producer</em> via pull-request (for example). As the <em>producer</em> tests are generated automatically, no-one is going to find out ‚Ä¶ Perfect! In the bag! Let‚Äôs get to work!</p>

<p>If we take a look at the <em>consumer</em> tests we see that basically, we want to test three situations: when the duration of the worklogs is 8 hours, more than 8 hours and less than 8 hours.</p>

<p>We therefore generate the new contracts and leave them so that they are accessible from the <em>producer</em>. The following code shows how we might do this (the complete code of all the steps that we will take, along with the .json, is in <a href="https://github.com/wearearima/time-report-ContractTesting-03" target="_blank">Github</a>).</p>

<h4 id="worklogsforworkeranddayyaml">worklogsForWorkerAndDay.yaml</h4>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">description</span><span class="pi">:</span> <span class="s">Given a worker's username and a day it returns worklogs with 8 hours</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">worklogsForWokerAndDay_with_8hours_worklogs</span>
<span class="na">request</span><span class="pi">:</span>
   <span class="na">url</span><span class="pi">:</span> <span class="s">/worklogs/worker/JESSI</span>
   <span class="na">queryParameters</span><span class="pi">:</span>
      <span class="na">day</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2020-05-01"</span>
   <span class="na">method</span><span class="pi">:</span> <span class="s">GET</span>
   <span class="na">matchers</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span>
      <span class="na">regex</span><span class="pi">:</span> <span class="s">/worklogs/worker/([a-zA-Z]*)</span>    
<span class="na">response</span><span class="pi">:</span>
   <span class="na">status</span><span class="pi">:</span> <span class="m">200</span>
   <span class="na">headers</span><span class="pi">:</span>
      <span class="na">Content-Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">application/json"</span>
   <span class="na">bodyFromFile</span><span class="pi">:</span> <span class="s">worklogs_8hours.json</span>

<span class="nn">---</span>   
<span class="na">description</span><span class="pi">:</span> <span class="s">Given a worker's username and a day it returns worklogs that sum more than 8 hours</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">worklogsForWokerAndDay_with_moreThan8hours_worklogs</span>
<span class="na">request</span><span class="pi">:</span>
   <span class="na">url</span><span class="pi">:</span> <span class="s">/worklogs/worker/JESSI</span>
   <span class="na">queryParameters</span><span class="pi">:</span>
      <span class="na">day</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2020-05-05"</span>
   <span class="na">method</span><span class="pi">:</span> <span class="s">GET</span>
   <span class="na">matchers</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span>
      <span class="na">regex</span><span class="pi">:</span> <span class="s">/worklogs/worker/([a-zA-Z]*)</span>    
<span class="na">response</span><span class="pi">:</span>
   <span class="na">status</span><span class="pi">:</span> <span class="m">200</span>
   <span class="na">headers</span><span class="pi">:</span>
      <span class="na">Content-Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">application/json"</span>
   <span class="na">bodyFromFile</span><span class="pi">:</span> <span class="s">worklogs_moreThan8hours.json</span>
   
<span class="nn">---</span>   
<span class="na">description</span><span class="pi">:</span> <span class="s">Given a worker's username and a day it returns worklogs that sum less than 8 hours</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">worklogsForWokerAndDay_with_lessThan8hours_worklogs</span>
<span class="na">request</span><span class="pi">:</span>
   <span class="na">url</span><span class="pi">:</span> <span class="s">/worklogs/worker/JESSI</span>
   <span class="na">queryParameters</span><span class="pi">:</span>
      <span class="na">day</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2020-05-10"</span>
   <span class="na">method</span><span class="pi">:</span> <span class="s">GET</span>
   <span class="na">matchers</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span>
      <span class="na">regex</span><span class="pi">:</span> <span class="s">/worklogs/worker/([a-zA-Z]*)</span>    
<span class="na">response</span><span class="pi">:</span>
   <span class="na">status</span><span class="pi">:</span> <span class="m">200</span>
   <span class="na">headers</span><span class="pi">:</span>
      <span class="na">Content-Type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">application/json"</span>
   <span class="na">bodyFromFile</span><span class="pi">:</span> <span class="s">worklogs_lessThan8hours.json</span>
</code></pre></div></div>

<p>We have generated the 3 situations that we wanted.<br />
With the contract defined, it‚Äôs time to generate the stub in the <em>producer</em>. We run <code class="highlighter-rouge">./mvnw clean install</code> and we see that although we have changed the contract with Spring Cloud Contract, the tests are autogenerated, so everything goes according to plan and we don‚Äôt have to touch anything in the <em>producer</em>.</p>

<p>As we already have the stub accessible with the possible cases generated from the <em>consumer</em>, we could now delete our unit tests and implement them by making calls to the stub directly. The code would be:</p>

<h4 id="consumer--reportsservicetestjava">Consumer | ReportsServiceTest.java</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">SpringExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SpringBootTest</span><span class="o">(</span><span class="n">properties</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"server.url=http://localhost:8083"</span> <span class="o">})</span>
<span class="nd">@AutoConfigureStubRunner</span><span class="o">(</span><span class="n">ids</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"eu.arima.tr:timeReports-producer:+:stubs:8083"</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReportsServiceTest</span> <span class="o">{</span>

  <span class="nd">@Autowired</span>
  <span class="kd">private</span> <span class="nc">ReportsService</span> <span class="n">reportsService</span><span class="o">;</span>

  <span class="nd">@Test</span>
  <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"Given a worklog with 8 hours duration the status is RIGHT_HOURS"</span><span class="o">)</span>
  <span class="kt">void</span> <span class="nf">when_the_worklog_for_the_resquested_day_is_8_hours_the_status_is_RIGHT_HOURS</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
    <span class="nc">LocalDate</span> <span class="n">day</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mo">05</span><span class="o">,</span> <span class="mo">01</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"JESSI"</span><span class="o">;</span>

    <span class="nc">DayStatusSummary</span> <span class="n">result</span> <span class="o">=</span> <span class="n">reportsService</span><span class="o">.</span><span class="na">getDayStatusSummaryForWorkerAndDay</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>

    <span class="n">assertStatusEquals</span><span class="o">(</span><span class="no">RIGHT_HOURS</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>

  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"Given a list of worklogs with more than 8 hours duration the status is MISSING_HOURS"</span><span class="o">)</span>
  <span class="kt">void</span> <span class="nf">when_the_worklogs_for_resquested_day_are_more_than_8_hours_the_status_is_MISSING_HOURS</span><span class="o">()</span>
      <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
    <span class="nc">LocalDate</span> <span class="n">day</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mo">05</span><span class="o">,</span> <span class="mo">05</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"JESSI"</span><span class="o">;</span>

    <span class="nc">DayStatusSummary</span> <span class="n">result</span> <span class="o">=</span> <span class="n">reportsService</span><span class="o">.</span><span class="na">getDayStatusSummaryForWorkerAndDay</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>

    <span class="n">assertStatusEquals</span><span class="o">(</span><span class="nc">DayStatus</span><span class="o">.</span><span class="na">EXTRA_HOURS</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>

  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"Given a list of worklogs with less than 8 hours duration the status is MISSING_HOURS"</span><span class="o">)</span>
  <span class="kt">void</span> <span class="nf">when_the_worklogs_for_resquested_day_are_less_than_8_hours_the_status_is_MISSING_HOURS</span><span class="o">()</span>
      <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
    <span class="nc">LocalDate</span> <span class="n">day</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mo">05</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"JESSI"</span><span class="o">;</span>

    <span class="nc">DayStatusSummary</span> <span class="n">result</span> <span class="o">=</span> <span class="n">reportsService</span><span class="o">.</span><span class="na">getDayStatusSummaryForWorkerAndDay</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>

    <span class="n">assertStatusEquals</span><span class="o">(</span><span class="no">MISSING_HOURS</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>

  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"Given the username of a worker the status result has that username"</span><span class="o">)</span>
  <span class="kt">void</span> <span class="nf">the_status_result_belongs_to_the_requested_worker</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
    <span class="nc">LocalDate</span> <span class="n">day</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mo">05</span><span class="o">,</span> <span class="mo">01</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"JESSI"</span><span class="o">;</span>

    <span class="nc">DayStatusSummary</span> <span class="n">result</span> <span class="o">=</span> <span class="n">reportsService</span><span class="o">.</span><span class="na">getDayStatusSummaryForWorkerAndDay</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">getWorkerUserName</span><span class="o">());</span>

  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"Given a date the status result has that date"</span><span class="o">)</span>
  <span class="kt">void</span> <span class="nf">the_status_result_belongs_to_the_requested_day</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
    <span class="nc">LocalDate</span> <span class="n">day</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2020</span><span class="o">,</span> <span class="mo">05</span><span class="o">,</span> <span class="mo">01</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">"JESSI"</span><span class="o">;</span>

    <span class="nc">DayStatusSummary</span> <span class="n">result</span> <span class="o">=</span> <span class="n">reportsService</span><span class="o">.</span><span class="na">getDayStatusSummaryForWorkerAndDay</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">day</span><span class="o">);</span>

    <span class="n">assertEquals</span><span class="o">(</span><span class="n">day</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">getDate</span><span class="o">());</span>

  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>
<p>Great! Everything is much cleaner. How could it not have occurred to me before!?</p>

<p>But what would happen if we modify the logic of our <em>consumer</em>?
For example, suppose we consider the case of summer, when instead of 8-hour days we have 7-hour days.
To introduce this change, as a minimum we would have to:</p>

<ol>
  <li>Modify the contract and add more scenarios, so that depending on the input parameters, it returns different data</li>
  <li>Send the contract to the <em>producer</em> (for example PR)</li>
  <li>Regenerate <em>producer</em> elements such as tests and the stub (<code class="highlighter-rouge">./mvnw clean install</code>)</li>
  <li>Modify the tests in the <em>consumer</em> to add the new scenarios</li>
</ol>

<p>We are modifying the contract when in reality there have been no changes in the ‚Äúagreement‚Äù between <em>consumer</em> and <em>producer</em>. We are taking advantage of Spring Cloud Contract to use it as a ‚Äúmock‚Äù data generation method for our business logic ‚Ä¶ Something doesn‚Äôt seem right. If we had not made the change, we would only have to do step 4. It seems that it wasn‚Äôt such a good idea after all.
So, can we do it? Yes. However <strong>just because you can doesn‚Äôt mean you should</strong>.</p>

<p>Having put it into practice, we are forced to return to our original conclusion highlighted at the beginning: Contract testing replaces neither unit tests, nor integration tests, nor other tests that we may have in our projects. Contract testing is one more tool, a complement to the previous ones, the objective of which is NOT to verify/ensure the proper functioning of the business logic (neither of consumers nor of producers) - for that there are the unit or integration tests. Its objective IS to ensure that the agreements between <em>consumer</em> and <em>producer</em> are complied with, as they make sure that the interaction between <em>consumer</em> and <em>producer</em> is correct.</p>

<p>The truth is that we have a tendency to discover a tool, and if we like it and it suits us, to use it indiscriminately. As we have seen, when we are applying them, it might seem that we could do without our unit tests, but if we look further, we see that what we thought was a brilliant discovery is not such a good idea, in fact quite the opposite.</p>

<h1 id="lessons-learned">Lessons learned</h1>
<p>Well, the time for the summary has come. Let‚Äôs see what we have learned throughout these posts.</p>

<ul>
  <li>
    <p>We have one more tool that helps us to test (micro)services applications, which does not apply to monolithic applications.</p>
  </li>
  <li>
    <p>As with all the other test types/techniques, it is necessary to find a balance and be clear about their objective - in this case, to test the agreement (contract or pact) between <em>consumer</em> and <em>producer</em> (neither more nor less) and not use them indiscriminately.</p>
  </li>
  <li>
    <p>In projects where the <em>producer</em> works across several <em>consumers</em> (where development is not linked between them) and/or public users, the <em>producer</em>-driven approach seems more appropriate, where it is the <em>producer</em> who defines the nature of the agreement to be complied with in the communication.</p>
  </li>
  <li>
    <p>In projects where the <em>producer</em> has no reason to exist without the <em>consumer</em>, and where developments are more linked, the <em>consumer</em>-driven approach seems more appropriate as it will be the <em>consumer(s)</em> who will indicate their needs to the <em>producer</em> by establishing the agreement to be fulfilled in the communication.</p>
  </li>
  <li>
    <p>How to implement/organize testing will depend on the selected approach and the nature of the project: there is no single universal recipe for good testing.</p>
  </li>
</ul>

            </div>

            
          </div>
        </article>
      </div>
    </main>

    <footer>
    <div class="wrapper">
        <div class="footer__container">
            <div class="footer__sello">
                <img src="/assets/images/arima_sello_white.png" alt="" />
            </div>
            <div class="footer__content">
                <div class="footer__data">
                    <dl>
                        <dt>web</dt>
                        <dd><a itemprop="sameAs" href="https://www.arima.eu/en/">arima.eu</a></dd>
                    </dl>
                    <dl>
                        <dt>social</dt>
                        <dd>
                            <a itemprop="sameAs" href="https://github.com/wearearima" class="social"><span class="icon-github"></span></a>
                            <a itemprop="sameAs" href="https://twitter.com/wearearima" class="social"><span class="icon-twitter"></span></a>
                            <a itemprop="sameAs" href="https://www.linkedin.com/company/arima-software-design/" class="social"><span class="icon-linkedin"></span></a>
                            <a itemprop="sameAs" href="/en/feed.xml" class="social"><span class="icon-feed"></span></a>
                        </dd>
                    </dl>
                    <dl>
                        <dt>Privacy</dt>
                        <dd class="politica-cookies">
                            <a href="/en/cookies.html">Cookies Policy</a>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</footer>
    <div class="cookies-message" id="cookies-message">
    <h4>This website uses cookies</h4>
    <p>This website uses cookies to improve user experience. By continuing to browse this website, you agree to the use of cookies as stated in our Cookies Policy.</p>
    <div class="buttons">
        <a class="button" href="/en/cookies.html">Read Cookies Policy</a>
        <button class="button" id="accept-cookies">Accept</button>
    </div>
</div>
<script>
    (function() {
        if(localStorage) {
            var cookiesAccepted = localStorage.getItem("cookies-accepted");
            if(cookiesAccepted) {
                hideCookiesMessage();
                
            } else {
                document.getElementById('accept-cookies').addEventListener("click", function() {
                    hideCookiesMessage();
                    localStorage.setItem("cookies-accepted", true);
                })
            }
        }
        function hideCookiesMessage() {
            document.getElementById('cookies-message').style.display = "none";
        }
    })();
</script>

  </body>

</html>