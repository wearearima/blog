<!DOCTYPE html>
<html lang="eu" itemscope itemtype="http://schema.org/Blog">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>AWS Lambda Funtzioak</title>
  <meta name="description" content="Azken aldian serverless hitza gero eta gehiago agertzen da post, foro edo softwarearekin erlazionatutako edozein baliabidetan. Laburbilduz, gure aplikazioa e...">
  
  <meta name="keywords" content="aws,serverless,cloud,faas,java">
  

  <!-- Twitter cards -->
  <meta name="twitter:site"    content="@wearearima">
  <meta name="twitter:creator" content="@urko">
  <meta name="twitter:title"   content="AWS Lambda Funtzioak">

  
  <meta name="twitter:description" content="">
  

  
  <meta name="twitter:card"  content="summary_large_image">
  <meta name="twitter:image" content="https://blog.arima.eu/assets/images/2021-04-30-aws-lambda/cloud.jpg">
  
  <!-- end of Twitter cards -->

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://blog.arima.eu/eu/2021/04/30/aws-lambda.html">
  <link rel="alternate" type="application/rss+xml" title="ARIMA" href="/eu/feed.xml">

  <!-- SEO Recipes (http://polyglot.untra.io/seo/) -->
  <meta http-equiv="Content-Language" content="eus">
  <link rel="alternate"
      hreflang="es"
      href="https://blog.arima.eu/eu/2021/04/30/aws-lambda.html" />
  
  
  <link rel="alternate"
      hreflang="es"
      href="https://blog.arima.eu/es/2021/04/30/aws-lambda.html" />
  
  
  <link rel="alternate"
      hreflang="en"
      href="https://blog.arima.eu/en/2021/04/30/aws-lambda.html" />
  
  
  <link rel="alternate"
      hreflang="eu"
      href="https://blog.arima.eu/eu/eus/2021/04/30/aws-lambda.html" />
  

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120217722-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120217722-1');
</script>
  
</head>
  

  <body>
    <nav class="toolbar">
    <div class="wrapper">    
        <a href="/eu/">
            <div class="toolbar__logo">
                <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" width="100%" height="100%" viewBox="0 0 33 6">
    <path id="path24" d="m30.346988508615652,-0.000015174522529526127 l-0.6439224998849951,0 l-2.7763635316117727,6.135695064030662 l0.7050150612484405,0 l2.3859233880279893,-5.335002838884215 l2.3660424189063254,5.335002838884215 l0.739668694925785,0 L30.346988508615652,-0.000015174522529526127 zm-8.274141805179609,3.3681675186951847 l-2.2194202716340565,-3.324608867598761 l-0.6962481061149294,0 l0,6.092136412934239 l0.6700853029999622,0 l0,-4.926062349034439 l2.2194202716340565,3.2553706313868567 l0.034929758248478535,0 l2.2192131782057056,-3.2639304930920168 l0,4.934622210739599 l0.6873430886958508,0 l0,-6.092136412934239 l-0.6961100438293623,0 l-2.2192131782057056,3.324608867598761 zm-9.143036799396208,-1.5057072863948877 c0,-1.0964906719739773 -0.8613705996531913,-1.8189015812038738 -2.201748299081466,-1.8189015812038738 l-2.619662837493104,0 l0,6.092136412934239 l0.6876192132669849,0 l0,-5.456842805897188 l1.8799251114245357,0 c0.9833486289517317,0 1.5576187057681203,0.4525681720889824 1.5576187057681203,1.2097017461390067 c0,0.7919252700129356 -0.7831583148794242,1.2620273523689407 -1.6968545207625496,1.2620273523689407 l0,0.6178287279128115 l1.7665759749739396,2.3672849794764295 l0.8442508762428699,0 l-1.8711581562910244,-2.4891249464894027 c0.9571858258367647,-0.17416557324290774 1.6534339319516944,-0.7659695603263191 1.6534339319516944,-1.7841098852409623 m2.7743616284710493,4.273234831730365 l0.6872050264102838,0 l0,-6.0920673817914555 l-0.6872050264102838,0 l0,6.0920673817914555 zM2.7761571742923965,-0.000015174522529526127 l-2.7761564381834223,6.135695064030662 l0.7048769989628736,0 l2.386061450313556,-5.335002838884215 l2.3658353254779745,5.335002838884215 l0.739668694925785,0 l-2.7761564381834223,-6.135695064030662 l-0.6441295933133457,0 z" stroke-width="0"/>
</svg>

            </div>
        </a>
        <!-- Language selector -->
        <div class="language-selector">
            
              
                <a class="unselected" href="/es/2021/04/30/aws-lambda.html">ES</a>
              
              
                &nbsp;|&nbsp;
              
            
              
                <a class="unselected" href="/en/2021/04/30/aws-lambda.html">EN</a>
              
              
                &nbsp;|&nbsp;
              
            
              
                <b class="selected">EU</b>
              
              
            
         </div>
    </div>
</nav>
<div id="publisher_id" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Arima 100% Software Design" />
    <meta itemprop="url" content="https://arima.eu" />
    <div itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://arima.eu/img/logo.png" />
    </div>
</div>
    <main aria-label="Content">        
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting" itemref="publisher_id">
          <link itemprop="mainEntityOfPage" href="/eu/2021/04/30/aws-lambda.html" />

          <header class="post-header">
            <div class="post-img" itemprop="image" itemscope itemtype="http://schema.org/ImageObject" style="background-image: url('https://blog.arima.eu/assets/images/2021-04-30-aws-lambda/cloud.jpg');">
              <meta itemprop="url" content="https://blog.arima.eu/assets/images/2021-04-30-aws-lambda/cloud.jpg" />
            </div>
            <div class="wrapper">
              <div class="post-info__container">
                <div class="post-info">
                  <h1 class="post-title" itemprop="name headline">AWS Lambda Funtzioak</h1>
                    <div class="post-meta" itemscope itemtype="https://schema.org/Person" itemprop="author">
                      
                      <div class="author-photo">
                        <img itemprop="image" src="/assets/images/authors/urko.png" alt="">
                      </div>
                      <div>
                        <span class="post-author" itemprop="name">Urko Lekuona</span>
                      </div>
                      <div>
                        <span class="post-date">2021-04-30</span>
                      </div>
                    </div>
                    <meta  itemprop="datePublished dateModified" content="2021-04-30" />
                </div>
              </div>
            </div>
          </header>
          <div class="wrapper">
            <div class="post-content" itemprop="articleBody">
              <p>Azken aldian  <em>serverless</em> hitza gero eta gehiago agertzen da post, foro edo softwarearekin erlazionatutako edozein baliabidetan. Laburbilduz, gure aplikazioa exekutatzen den makinaz ez arduratzea eta horren hedapen prozesua arintzea inplikatzen duen kontzeptua da <em>serverless</em>. Ez da ulertzeko kontzeptu oso erraza, eta horregatik aurrerago beste post batean sakonduko dugu.</p>

<p>Post honetan AWS Lambdari buruz hitz egin nahi dut, AWSek funtzio moduan (FaaS) eskaintzen digun <em>serverless</em> soluzioaz. Funtzio bat gertaera baten bidez aktibatzen den eta eginkizun jakin bat duen edozein aplikazio gisa uler daiteke.</p>

<p>AWS Lambda ondorengoaz arduratzen da:</p>
<ul>
  <li>Gertaera gertatzen denean soilik abiarazteaz gure aplikazioa, eta exekuzioa amaitzerakoan berehala hiltzeaz. Exekuzioaz arduratuko den makina hornitzeaz ere arduratzen da, dena denbora errekorrean eginez. Aurrerago ikusiko dugu adibideren bat.</li>
  <li>Funtzioa exekutatzen egon den denbora soilik kobratzeaz. Honen ondorioz, kostuak txikitu eta baliabideen erabilera optimizatzen da.</li>
  <li>Behar izanez gero, aplikazioaren instantzia gehiago modu konkurrentean abiarazteaz. Honi esker, gure funtzioa trafiko-tontorrera egokitzea lortuko dugu, erabiltzen ditugun baliabideak soilik ordainduz. Agur esan lan egiten ez duten makinei eta baliabiderik gabe geratzeari!</li>
</ul>

<h3 id="nola-funtzionatzen-du">Nola funtzionatzen du</h3>

<p>Esan dugun bezala, funtzioa gertaera bat jazotzen denean abiarazten da. Lambdaren kasuan, gertaera bat ondorengo arrazoiengatik gertatu daiteke:</p>
<ul>
  <li>AWSeko baliabide batetik sortzea.</li>
  <li>AWSekoa ez den baliabide batetik sortzea, adibidez, Kafka errenkada bat.</li>
  <li>HTTP eskaera bat egitea.</li>
  <li>Beste batzuk.</li>
</ul>

<p><img src="/assets/images/2021-04-30-aws-lambda/lambda_example.png" alt="Lambda funtzio baten adibidea" class="center" />
<label style="text-align: center; display: block;">Lambda funtzio baten adibidea (<a href="https://aws.amazon.com/lambda/" target="_blank">iturria</a>)</label></p>

<p>Gure aplikazioak AWS sistematik iristen den gertaera tratatu ahal izateko, lehenik eta behin, Amazonek ematen duen SDKa erabili behar da (edo Lambdarekin bateragarria den liburutegi bat, <a href="https://spring.io/projects/spring-cloud-function" target="_blank">Spring Cloud Function</a> bezala) gertaeraz arduratuko den <em>handler</em> bat inplementatzeko.</p>

<p>Post honetan AWSren SDKrekin eginiko Spring Boot aplikazio bat erabiliko dut. Aplikazio honen kodea <a href="https://github.com/wearearima/serverlessDemoAWSHandler" target="_blank">biltegi honetan</a> ikus daiteke. Biltegiak funtzioa sortzeko jarraibideak ere baditu.</p>

<p>Lambdak funtzioa modu zehatz batean konfiguratzeko aukera ematen digu, ondorengo konfigurazio hauek ditugularik: erabili nahi dugun instantzia bakoitzaren memoria kantitatea, exekuzioaren denbora maximoa, gure aplikaziorako ingurune-aldagaiak definitzea (adibidez, JVMaren propietateak konfiguratu daitezke honen bidez), etab.</p>

<p>Behin hau eginda, funtzioa erabiltzeko prest dago. Aipatzekoa da ez dugula makinaren sistema eragilerik aukeratu beharrik izan, ezta aplikazioak exekutatu ahal izateko Java konfiguratu beharrik izan edo ezta sekurizatu beharrik izan ere. Ez dut makinaren egoerari buruz kezkatu beharrik izan, edo autoeskalatzeko sistemarik ezarri behar izan ere, beharrezkoa izango balitz. Honetaz guztiaz Lambda arduratzen da.</p>

<p>Hurrengo irudian, funtzioaren exekuzioaren emaitzak ikus ditzakegu. Ezkerrean, lehen exekuzioaren edo hasiera hotzaren emaitzak daude (<em>cold-startup</em>), eta eskuinean bigarren exekuzioaren edo hasiera beroaren emaitzak (<em>warm-startup</em>). Ikus dezakegu ezberdintasun handia dagoela exekuzio-denboran, eta ezberdintasuna are nabarmenagoa izango litzateke gure aplikazioa lehen aldiz hasteko denbora gehiago beharko balu (adibidez, datu-base batekin konexioen <em>pool</em> bat sortu beharko balu).</p>

<p><img src="/assets/images/2021-04-30-aws-lambda/results.png" alt="Exekuzioen emaitzak (cold / warm)" class="center" />
<label style="text-align: center; display: block;">Exekuzioen emaitzak (cold / warm)</label></p>

<p><em>Cold-startup</em>aren arazoa ohikoa da <em>serverless</em> kasuan, etengabe ari baikara instantzia berriak sortzen. Hurrengo post batean hori saihesteko moduak aztertuko ditugu. Oraingoz, Lambdak <em>provisioned concurrency</em> izeneko aukera eskaintzen duela aipatuko dut, eta honek aukera ematen digula aukeratzen ditugun instantzien kopurua aktibo mantentzeko (ordainduz gero, noski).</p>

<h3 id="hausnarketak">Hausnarketak:</h3>

<p>Zerbitzu honi buruz irakurtzean, kontuan hartzeko garrantzitsuak iruditzen zaizkidan muga tekniko batzuk aurkitu ditut.</p>

<ol>
  <li>Funtzioa paralelizagarria izan behar da. Eskaera bat prozesatzen ari den bitartean beste eskaera bat iristen bada, beste instantzia bat sortuko da. Horrek esan nahi du funtzioa aldi berean exekutatzeko konkurrentzia-arazorik ez dagoela ziurtatu beharko dugula. Adibide bat datu-base batean erregistro bat eguneratzen duen funtzio bat izan daiteke.</li>
  <li>Funtzioari gehienez 10 GBko memoria esleitu ahal diogu. Gainera, esleitutako vCPUen kopurua aukeratutako memoriarekiko proportzionala da (gehienez 6 vCPU). Honek, bi baliabideetako bat gainhornitzera behartu ahal gaitu, edo baita nahikoak ez izatera ere, ez baitira oso muga altuak.</li>
  <li>Programazio-lengoai nagusi gehienentzako exekuzio-inguruneak eskaintzen ditu Amazonek. Hauetakoren batek ere ez badigu balio (gure lengoaia ez dagoelako horietakoen artean edo bertsio zehatz bat behar dugulako), ingurune pertsonalizatu bat konfiguratu daiteke, edo bestela, irudi bat erabili daiteke kontenedore bat abiarazteko (honetaz beste post batean hitz egingo dugu).</li>
  <li>Exekuzio bakoitzaren gehienezko denbora 15 minutu dira. Gure negoziorako nahikoa ez bada edo funtzioa denbora luzez exekutatzen ari bada (denbora fakturagarria), agian beste <em>serverless</em> mota bat aukeratu beharko genuke.</li>
</ol>

<h3 id="ondorioak">Ondorioak</h3>

<p>AWS Lambda zerbitzu ahaltsua da, oso ondo integratzen dena gainerako AWS ingurunearekin. <em>Serverless</em> munduan sartzen gaitu, bere abaintala guztiekin, eta aplikazio baten hedapena inoiz baino errazagoa eta merkeagoa egiten du.</p>

<p>Hala ere, ez da arazo guztien soluzioa. Beti bezala, kasu zehatz bakoitzak bere xehetasunak ditu, eta ikerketa bat egin beharko da Lambda egokitzen den edo irtenbide tradizionalago bat hobe den ikusteko kasu bakoitzean. Lambda oso garestia izan daiteke eskaera asko aldi berean eta etengabe egiten badira. Nolanahi ere, niri pertsonalki, begiak irekitzeko eta FaaS funtzioetan barneratzeko balio izan dit, eta iraganean hartutako erabaki batzuk birplantearazi dizkit.</p>

            </div>

            
          </div>
        </article>
      </div>
    </main>

    <footer>
    <div class="wrapper">
        <div class="footer__container">
            <div class="footer__sello">
                <img src="/assets/images/arima_sello_white.png" alt="" />
            </div>
            <div class="footer__content">
                <div class="footer__data">
                    <dl>
                        <dt>web</dt>
                        <dd><a itemprop="sameAs" href="https://www.arima.eu/eu/">arima.eu</a></dd>
                    </dl>
                    <dl>
                        <dt>social</dt>
                        <dd>
                            <a itemprop="sameAs" href="https://github.com/wearearima" class="social"><span class="icon-github"></span></a>
                            <a itemprop="sameAs" href="https://twitter.com/wearearima" class="social"><span class="icon-twitter"></span></a>
                            <a itemprop="sameAs" href="https://www.linkedin.com/company/arima-software-design/" class="social"><span class="icon-linkedin"></span></a>
                            <a itemprop="sameAs" href="/eu/feed.xml" class="social"><span class="icon-feed"></span></a>
                        </dd>
                    </dl>
                    <dl>
                        <dt>Pribatutasuna</dt>
                        <dd class="politica-cookies">
                            <a href="/eu/cookies.html">Cookie politika</a>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</footer>
    <div class="cookies-message" id="cookies-message">
    <h4>Web gune honek cookieak erabiltzen ditu</h4>
    <p>Web gune honek cookieak erabiltzen ditu nabigazio esperientzia hobetzeko. Gure web gunea erabiltzearekin batera, gure cookie politikarekin bat zatozela onartzen duzu.</p>
    <div class="buttons">
        <a class="button" href="/eu/cookies.html">Cookie politika irakurri</a>
        <button class="button" id="accept-cookies">Onartu</button>
    </div>
</div>
<script>
    (function() {
        if(localStorage) {
            var cookiesAccepted = localStorage.getItem("cookies-accepted");
            if(cookiesAccepted) {
                hideCookiesMessage();
                
            } else {
                document.getElementById('accept-cookies').addEventListener("click", function() {
                    hideCookiesMessage();
                    localStorage.setItem("cookies-accepted", true);
                })
            }
        }
        function hideCookiesMessage() {
            document.getElementById('cookies-message').style.display = "none";
        }
    })();
</script>

  </body>

</html>